<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Займы онлайн - Быстрое получение микрозаймов</title>
    <meta name="description" content="Займы онлайн - сервис для подбора и сравнения микрозаймов от МФО. Быстрое одобрение, выгодные условия, 0% на первый займ.">
    
    <!-- Open Graph tags -->
    <meta property="og:title" content="Займы онлайн - Быстрое получение микрозаймов">
    <meta property="og:description" content="Сервис для подбора и сравнения микрозаймов от МФО. Быстрое одобрение, выгодные условия.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234F46E5'%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-14.243L7.757 12 12 16.243 16.243 12 12 7.757z'/%3E%3C/svg%3E">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Environment script for determining URLs -->
    <script>
      // Встраиваем env.js напрямую в HTML, чтобы избежать проблем с загрузкой в мобильном приложении
      (function() {
        // Определение базового URL для API и приложения
        function getBaseUrl() {
          // Обнаруживаем режим работы
          const isProd = window.location.hostname.includes('.replit.app') || 
                        window.location.hostname.includes('.repl.co');
          
          // В production используем полный URL
          if (isProd) {
            return window.location.origin;
          }
          
          // В режиме разработки используем относительные пути
          return '';
        }
        
        // Определяем url replit для capacitor
        function getReplitUrl() {
          // Если мы уже на домене Replit, используем текущий домен
          if (window.location.hostname.includes('.replit.app') || 
              window.location.hostname.includes('.repl.co')) {
            return window.location.origin;
          }
          
          // В режиме разработки пытаемся определить Replit домен
          return 'https://workspace.chisharic.repl.co';
        }
        
        // Определение типа устройства
        function detectDevice() {
          // Обнаруживаем тип устройства
          const userAgent = navigator.userAgent || navigator.vendor || window.opera;
          
          // Проверяем наличие Capacitor
          const isCapacitor = 
            typeof window.Capacitor !== 'undefined' || 
            userAgent.indexOf('MicroloansApp') !== -1;
            
          // Проверяем, запущено ли приложение из Capacitor
          if (isCapacitor) {
            return 'capacitor';
          }
          
          // Проверяем мобильные устройства
          const isMobile = /android|webos|iphone|ipad|ipod|blackberry|windows phone/i.test(userAgent);
          return isMobile ? 'mobile' : 'desktop';
        }
        
        // Экспортируем функции и параметры
        window.APP_ENV = {
          getBaseUrl: getBaseUrl,
          baseUrl: getBaseUrl(),
          replitUrl: getReplitUrl(),
          isProd: window.location.hostname.includes('.replit.app') || 
                  window.location.hostname.includes('.repl.co'),
          deviceType: detectDevice()
        };
        
        console.log('Environment initialized:', window.APP_ENV);
      })();
    </script>
    
    <!-- OneSignal Web Push Notifications -->
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" defer></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>
