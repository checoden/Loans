# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã:

### 1. AndroidManifest.xml
- ‚úì POST_NOTIFICATIONS —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–æ
- ‚úì WAKE_LOCK, VIBRATE, C2DM —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úì targetSdkVersion="34" –¥–ª—è Android 15
- ‚úì package="ru.checoden.onlineloans"

### 2. MainActivity.java  
- ‚úì –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∑–∞–ø—Ä–æ—Å POST_NOTIFICATIONS –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ Build.VERSION.SDK_INT >= TIRAMISU (API 33+)
- ‚úì ActivityCompat.requestPermissions() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- ‚úì onRequestPermissionsResult() –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç

### 3. OneSignal JavaScript (client/src/lib/onesignal.ts)
- ‚úì OneSignal SDK v5.2.13 
- ‚úì window.plugins.OneSignal.Notifications.requestPermission(true)
- ‚úì –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (fallback)
- ‚úì –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4. CI/CD Pipeline (.github/workflows/build-apk.yml)
- ‚úì –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- ‚úì –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∏–∑ APK –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úì –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–±–æ—Ä–∫–∏ –µ—Å–ª–∏ POST_NOTIFICATIONS –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úì –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üéØ –ö–∞–∫ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Android 13+:

1. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   - MainActivity.java –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç POST_NOTIFICATIONS
   - –ü–æ—è–≤–∏—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∞–ª–æ–≥ "–†–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è?"

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OneSignal:**
   - –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ 1-3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑–æ–≤–µ—Ç requestPermission() –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è push

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
   - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ OneSignal API
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–≤—É–∫–∞, –≤–∏–±—Ä–∞—Ü–∏–∏, –∏–∫–æ–Ω–æ–∫

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

**–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
```bash
# –°–æ–±—Ä–∞—Ç—å APK —Å –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
git tag v2.2.3 && git push --tags

# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ APK –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
adb logcat | grep -i "POST_NOTIFICATIONS\|OneSignal\|Permission"
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ—è–≤–∏—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç "POST_NOTIFICATIONS permission granted"
- OneSignal —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –¢–µ—Å—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—É–¥—É—Ç –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å—Å—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **Android 13+ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ—Ç POST_NOTIFICATIONS –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ**
2. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ requestPermissions() –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω**
3. **OneSignal –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
4. **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ - –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –Ω—É–∂–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö Android 13-15.